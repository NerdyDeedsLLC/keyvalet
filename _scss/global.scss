
*,
html,
body {
    box-sizing: border-box;
}

html,
body {
    margin: 0;
    padding: 0;
    width: 100vw;
    max-width: 100%;
}

html {
    font-size        : responsive 10px 16px;
    font-range       : 768px 1280px;
    box-sizing       : border-box;
    font-family      : helvetica;
}

main {
	display: table;
	width: 99vw;

	& > * {
		display: table-cell;
		max-width: 80%;
		width: 80%;
	}
	& > aside {
		min-width: 20%;
		max-width: 20%;
		width: 20%;
		height: calc(100vh - 1rem);
		top: 0; 
		position: fixed;
		border:1px solid #AAA;
		margin:0.5rem 0;
		background-color:#EEE;

		ul,
		li  {
			list-style: none;
			text-align: center;
			margin: 0;
			font-size: 0.75rem;
			padding: 0;
		}

		li > button {
			padding: 3px 0;
			background: linear-gradient(180deg, rgba(170,170,170,1) 0%, rgba(238,238,238,1) 25%, rgba(170,170,170,1) 100%);
			width: calc(100% - 1rem);
			border: 1px solid rgba(#000, 0.25);
			display: inline-block;
			text-decoration: none;
			margin: 0.5rem;
			border-radius: 4px;
			color: #000;
		}

		li > textarea {
			font-size:0.75rem;
			width:90%;
		}
	}
}

$keydim: 2rem;
$keywide: 2 * $keydim;
$head-upscale: 1.5;

section {
	
	margin:0.5rem 0.5rem 1rem;
	font-weight:bold;
	border:0.2rem dotted #999;
	padding-top:1rem;

	& > label {
		font-size:1.5rem;

		span {
			margin:0 0.5rem;
		}
	}

	div {
		font-weight:normal;
		font-size:1rem;

	}

	.rule-count {

		float:right;
		position:relative;
		font-weight:100;
		font-size:1.5rem;
		display:inline-block;
		background-color:#AAA;
		color:#FFF;
		width:1.75rem;
		height:1.75rem;
		line-height: 1.75rem;
		border-radius:50%;
		text-align: center;
		margin:-0.5rem 4.5rem 0 0;
		opacity:0.75;

		&::before {
			content:'active bindings';
			top:0;
			left:2.1rem;
			position:absolute;
			font-weight: bold;
			text-align:left;
			font-size:.85rem;
			line-height: 1;
			color:#999;
			float:right;
		}

		&::after {
			content:'0';
			top:0;
			left:0rem;
			position:absolute;
			font-weight:100;
			font-size:1.5rem;
			background-color:#AAA;
			color:#FFF;
			width:1.75rem;
			height:1.75rem;
			line-height: 1.75rem;
			border-radius:50%;
			text-align: center;
			opacity: 1;
			transition:all .5s ease-in;
		}
	}
}

#logo {
	max-width:80%;
	& > nav {
		text-align:right;

		a {
			font-family: 'Niramit', sans-serif;
			font-weight:bold;
			font-size:2rem;
			margin:0 1rem 0 0;
			text-decoration: none;
			color:#1B92FC;

			&:first-child {
				float:left;
				margin:0 0 0 1rem;
			}
		}
	}

	& > div {
		position:relative;
		margin:0 calc(50% - 8rem) 1rem;

		& > b {
			background:url(/assets/images/keycap_wide.png) no-repeat;
			background-size: contain;
			display:inline-block;
			width:16rem;
			height:8rem;
			text-align: center;
			font-size:4rem;
			color:rgba(#000, .5);
			line-height: 5.5rem;
			margin:0 -0.5rem;
		}

		& > svg {
			position:absolute;
			top:-5rem;
			left:-2rem;
			width:30rem;
			transform: rotate(5deg);

			path {
			  fill: transparent;
			}

			text {
			  fill: #1B92FC;
				font-family: 'Molle', cursive;
				font-size:2.35rem;
				text-align: right;
				letter-spacing: -0.05rem;
				text-shadow:  0    3px 0 #FFF,
										  3px  0   0 #FFF,
										  3px  3px 0 #FFF,
										  0   -3px 0 #FFF,
										 -3px  0   0 #FFF,
										 -3px -3px 0 #FFF,
										  0    5px 2px #747474,
										  5px  0   2px #747474,
										  5px  5px 2px #747474,
										  0   -5px 2px #747474,
										 -5px  0   2px #747474,
										 -5px -5px 2px #747474,
										 2px 12px 12px rgba(#000, .5);
			}
		}
	}
}

table {
	width:100%;
	border-top:0.2rem dotted #CCC;
	border-bottom:0.2rem dotted #CCC;
	margin-top:1rem;
	font-size:1rem;

	& + table {
		margin-top:0;
	}

	thead {
		text-align: left;
	}

	th {
		padding: 0.5rem 0;
		border-bottom:0.2rem dotted #EEE;

		b {
			color:#888;
			background-color: #FFF;

			&::after {
				border:1px solid #000;
				display:inline-block;
				padding: 1px 3px 0;
				border-radius:4px;
				content:attr(data-btn-text);
				color:#000;
				margin-left:0.75rem;
				
			}

			& + b {
				&::before {
					display:inline-block;
					margin:0 1px;
					content:'+';
				}

				&::after {
					margin:0;
				}
			}

			&[data-btn-text='⇧'],
			&[data-btn-text='⌘'],
			&[data-btn-text='⌥'],
			&[data-btn-text='⌃'],
			&[data-btn-text='SHIFT'],
			&[data-btn-text='CMD'],
			&[data-btn-text='OPT'],
			&[data-btn-text='CTRL'] {
				font-size: 0.75rem;
				font-weight: 900;

				&::after {
					border-color:#666;
					color:#333;
					background-color: #EEE;
				}
			}
		}

		span {
			font-family: monospace;
			font-weight: normal;
			font-size: 0.75rem;
			float: right;
			margin-right: .25rem;
			border:1px solid #CCC;
			background-color: #EEE;
			padding: 0.15rem;
			color: #666;
			opacity: 0.75;

			&:empty {
				display:none;
			}
		}
	}

	&:hover {
		box-shadow: inset 0 0 6.25rem rgba(#00D1FF, 0.2);
	}

	tr {
		& + tr {
			border-top:0.2rem dotted #AAA;
		}
	}

	td {
		font-size:1rem;
		padding:0.5rem 0.25rem;
		
		width:1%;
		text-align: center;

		&:nth-child(5) {
			width:100%;
		}

		& + td {
			border-left:0.2rem dotted #EEE;
		}
	}
}

button {
	color: #AAA;
	cursor: pointer;
	transition: all 0.3s ease-in-out;

	&:active {
		transition:transform 0.1s ease-in-out;
		transform: scale(0.9) translateY(1px);
	}

	&:hover,
	&:focus,
	&:active {
    outline: none;
	}

	&.append {
		background-color:transparent;
		border: 0 none;
		border-radius: 50%;
		font-weight: 400;
		font-size: 2.5rem;
		display: inline-block;
		padding: 0;
		margin: 0.25rem;
		text-align: center;
		line-height: 1.5rem;
		position:relative;
		float:right;

		&::before {
			content:attr(alt);
			font-size:1rem;
			display:inline-block;
			padding:0;
			vertical-align: middle;
			padding-right:5px;
		}

		&:hover,
		&:focus,
		&:active {
			color: #060;
		}
	}

	&.remove {
		background-color:transparent;
		border: 0 none;
		border-radius: 50%;
		font-weight: 900;
		font-size: 2rem;
		display: inline-block;
		padding: 0;
		margin: 0;
		text-align: center;
		line-height: 0;

		&:hover,
		&:focus,
		&:active {
			color: #A00;
		}
	}
}

label {
	line-height:$keydim;
	font-size:#{(5 / 12) * $keydim};

	span,
	span.wide,
	span.header {
		position:relative;	
		display: inline-block;
		width: $keydim;
		height: $keydim;
		font-size: #{(5 / 12) * $keydim};
		background: url('/assets/images/keycap.png') no-repeat top left;
		background-size: contain;
		vertical-align: middle;
		margin: 0 #{(1 / 6) * $keydim} #{(1 / 12) * $keydim};

		&::before {
			content:'';
			display:block;
			position:absolute;
			width:#{(2 / 3) * $keydim};
			height:#{(5 / 6) * $keydim};
			box-shadow: 0 #{(0.25) * $keydim} #{(1 / 3) * $keydim} rgba(#000, 0.5);
			z-index:-1;
			left:#{(1 / 6) * $keydim};
			top:0;
		}

		&::after {
			top: #{(-1 / 6) * $keydim};
			left: 0;
			font-weight:900;
			color:#888;
			text-shadow: #{-0.1875 * $keydim} #{-0.1875 * $keydim} #{0.1875 * $keydim} rgba(#aaa, 0.3),
									 #{-0.1875 * $keydim}  #{0.1875 * $keydim} #{0.1875 * $keydim} rgba(#aaa, 0.3),
										#{0.1875 * $keydim} #{-0.1875 * $keydim} #{0.1875 * $keydim} rgba(#aaa, 0.3),
										#{0.1875 * $keydim}  #{0.1875 * $keydim} #{0.1875 * $keydim} rgba(#aaa, 0.3);
			content: attr(data-keycap) '\A';
			display: inline-block;
			position: absolute;
			width: $keydim;
			height: $keydim;
			text-align: center;
			line-height: $keydim;
			transform: scaleY(0.6666);
		}
	}

	span.wide {
		width: $keywide;
		background: url('/assets/images/keycap_wide.png') no-repeat top left;
		background-size:contain;
		margin: 0 #{(1 / 12) * $keywide} #{(1 / 12) * $keywide};

		&::before {
			width:#{(5 / 6) * $keywide};
		}

		&::after {
			width: $keywide;
		}
	}

	span.header {
		width: #{$keydim * $head-upscale};
		height: #{$keydim * $head-upscale};
		font-size: #{(5 / 12) * $keydim * $head-upscale};
		margin: 0 #{(1 / 6) * $keydim * $head-upscale} #{(1 / 12) * $keydim * $head-upscale};

		&::before {
			width:#{(2 / 3) * $keydim * $head-upscale};
			height:#{(5 / 6) * $keydim * $head-upscale};
			box-shadow: 0 #{(0.25) * $keydim * $head-upscale} #{(1 / 3) * $keydim * $head-upscale} rgba(#000, 0.5);
			left:#{(1 / 6) * $keydim * $head-upscale};
		}

		&::after {
			top: #{(-1 / 6) * $keydim * $head-upscale};
			text-shadow: #{-0.1875 * $keydim * $head-upscale} #{-0.1875 * $keydim * $head-upscale} #{0.1875 * $keydim * $head-upscale} rgba(#aaa, 0.3),
									 #{-0.1875 * $keydim * $head-upscale}  #{0.1875 * $keydim * $head-upscale} #{0.1875 * $keydim * $head-upscale} rgba(#aaa, 0.3),
										#{0.1875 * $keydim * $head-upscale} #{-0.1875 * $keydim * $head-upscale} #{0.1875 * $keydim * $head-upscale} rgba(#aaa, 0.3),
										#{0.1875 * $keydim * $head-upscale}  #{0.1875 * $keydim * $head-upscale} #{0.1875 * $keydim * $head-upscale} rgba(#aaa, 0.3);
			width: #{$keydim * $head-upscale};
			height: #{$keydim * $head-upscale};
			line-height: #{$keydim * $head-upscale};
		}
	}
}

[type='checkbox'] {
	width:#{0.5 * $keydim};
	height:#{0.5 * $keydim};
	display:none;
	
	transform:translateY(#{(1 / 12) * $keydim});

	& ~ div {
		overflow: hidden;
		transition: all 0.3s ease-in-out;
		max-height: 1rem;
		min-height: 1rem;

		& > button {
			transition: all 0.3s ease-in-out;
			opacity:0;
		}
	}


	&:checked {
		& ~ div {
			transition: all 0.3s ease-in-out;
			max-height:100rem;

			& > button {
				transition: all 0.3s ease-in-out;
				opacity:1;
			}
		}

		& ~ span.rule-count::after {
			opacity: 0;
			transition: all 1s ease-out;
		}

		& + label > span {
			&::before {
				box-shadow: 0 #{(1 / 4) * $keydim} #{(1 / 3) * $keydim} rgba(#000, 0.5),
										0 #{(1 / 4) * $keydim} #{(1 / 2) * $keydim} #00D1FF;
			}

			&::after {
				color:#1B92FC;
				text-shadow: #{(-1 / 24) * $keydim} #{(-1 / 24) * $keydim} #{0.0625 * $keydim} rgba(#00D1FF, 0.5),
										 #{(-1 / 24) * $keydim}  #{(1 / 24) * $keydim} #{0.0625 * $keydim} rgba(#00D1FF, 0.5),
											#{(1 / 24) * $keydim} #{(-1 / 24) * $keydim} #{0.0625 * $keydim} rgba(#00D1FF, 0.5),
											#{(1 / 24) * $keydim}  #{(1 / 24) * $keydim} #{0.0625 * $keydim} rgba(#00D1FF, 0.5);
			}
		}
	}

	&:active + label > span {
		transform: translateY(#{0.05 * $keydim});

		&::before {
			box-shadow: none;
			z-index: auto;
		}
	}

	&:disabled + label {
		opacity: 0.5;
	}
}

html.nolabels {
		font-size:0.5rem;

		main {
			transform: scale(.75);
		}

	td {
	 label {
			font-size:0;
		}
	}

	td br {
		display:none;
	}
	thead {
		display:none;
	}
}